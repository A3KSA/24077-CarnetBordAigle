import{a as B,b as z,c as q}from"./chunk-I5UWP6FP.js";import{a as J,b as K,c as Q,d as X}from"./chunk-CAGHSYDK.js";import{Ba as O,Da as Z,Ea as E,Ga as L,Ha as D,Ja as F,Ka as U,L as a,M as C,Pa as j,Q as x,R as m,Ra as R,T as o,Ta as W,U as r,V as g,W as y,Wa as G,X as S,Y as f,Z as u,_ as s,ba as V,ca as p,da as A,fa as b,ga as k,ha as M,na as H,o as v,ra as T,s as N,sa as I,t as w,ta as P,x as _,y as d,z as h}from"./chunk-3BMUMNM5.js";function ne(t,c){if(t&1){let e=f();o(0,"button",20),u("click",function(){_(e);let n=s();return d(n.openModalNewUser())}),h(),o(1,"svg",21),g(2,"path",22)(3,"path",23)(4,"path",24),r(),p(5," Utilisateur "),r()}}function ie(t,c){if(t&1){let e=f();o(0,"button",20),u("click",function(){_(e);let n=s();return d(n.openModalNewNotebook())}),h(),o(1,"svg",14),g(2,"path",25),r(),p(3," Carnet "),r()}}function oe(t,c){if(t&1){let e=f();o(0,"button",26),u("click",function(){_(e);let n=s();return d(n.toggleContent(!1))}),h(),o(1,"svg",14),g(2,"path",27),r(),p(3," Utilisateurs "),r()}}function re(t,c){if(t&1){let e=f();o(0,"button",26),u("click",function(){_(e);let n=s();return d(n.toggleContent(!0))}),h(),o(1,"svg",21),g(2,"path",28)(3,"path",29)(4,"path",30),r(),p(5," Carnets "),r()}}function se(t,c){if(t&1){let e=f();o(0,"div",31)(1,"input",32),M("ngModelChange",function(n){_(e);let l=s();return k(l.filterText,n)||(l.filterText=n),d(n)}),u("input",function(){_(e);let n=s();return d(n.applyFilters())}),r(),o(2,"div",33)(3,"label",34)(4,"input",35),M("ngModelChange",function(n){_(e);let l=s();return k(l.showPublic,n)||(l.showPublic=n),d(n)}),u("change",function(){_(e);let n=s();return d(n.applyFilters())}),r(),g(5,"span",36),r(),o(6,"div"),p(7,"public"),r()(),o(8,"div",33)(9,"label",34)(10,"input",35),M("ngModelChange",function(n){_(e);let l=s();return k(l.showPrivate,n)||(l.showPrivate=n),d(n)}),u("change",function(){_(e);let n=s();return d(n.applyFilters())}),r(),g(11,"span",36),r(),o(12,"div"),p(13,"priv\xE9"),r()()()}if(t&2){let e=s();a(),b("ngModel",e.filterText),a(3),b("ngModel",e.showPublic),a(6),b("ngModel",e.showPrivate)}}function le(t,c){if(t&1){let e=f();o(0,"app-notebook-item",40),u("notebookDeleted",function(n){_(e);let l=s(3);return d(l.onNotebookDeleted(n))}),r()}if(t&2){let e=c.$implicit;m("notebook",e)}}function ae(t,c){if(t&1&&(y(0),o(1,"div"),p(2,"Liste des carnets d'exploitations"),r(),x(3,le,1,1,"app-notebook-item",39),S()),t&2){let e=s(2);a(3),m("ngForOf",e.notebooks)}}function ce(t,c){if(t&1){let e=f();o(0,"app-user-item",42),u("userDeleted",function(n){_(e);let l=s(3);return d(l.onUserDeleted(n))}),r()}if(t&2){let e=c.$implicit;m("user",e)}}function me(t,c){if(t&1&&(o(0,"div"),p(1,"Liste des utilisateurs"),r(),x(2,ce,1,1,"app-user-item",41)),t&2){let e=s(2);a(2),m("ngForOf",e.users)}}function pe(t,c){if(t&1&&(o(0,"div",37),x(1,ae,4,1,"ng-container",38)(2,me,3,1,"ng-template",null,0,H),r()),t&2){let e=V(3),i=s();a(),m("ngIf",i.showNotebooks)("ngIfElse",e)}}function _e(t,c){if(t&1){let e=f();y(0),o(1,"div"),p(2,"Aucun carnet pour l'instant"),r(),o(3,"button",20),u("click",function(){_(e);let n=s(2);return d(n.openModalNewNotebook())}),h(),o(4,"svg",14),g(5,"path",25),r(),p(6," Premier carnet "),r(),S()}}function de(t,c){if(t&1){let e=f();o(0,"app-user-item",42),u("userDeleted",function(n){_(e);let l=s(3);return d(l.onUserDeleted(n))}),r()}if(t&2){let e=c.$implicit;m("user",e)}}function ue(t,c){if(t&1&&(o(0,"div"),p(1,"Liste des utilisateurs"),r(),x(2,de,1,1,"app-user-item",41)),t&2){let e=s(2);a(2),m("ngForOf",e.users)}}function ge(t,c){if(t&1&&(o(0,"div",43),x(1,_e,7,0,"ng-container",38)(2,ue,3,1,"ng-template",null,0,H),r()),t&2){let e=V(3),i=s();a(),m("ngIf",i.showNotebooks)("ngIfElse",e)}}var $=(()=>{class t{userService;notebookService;route;dialog;router;user=[];allNotebooks=[];notebooks=[];showPrivate=!0;showPublic=!0;filterText="";showNotebooks=!0;users=[];constructor(e,i,n,l,te){this.userService=e,this.notebookService=i,this.route=n,this.dialog=l,this.router=te}ngOnInit(){this.user._id=this.route.snapshot.paramMap.get("id"),this.getAllNotebooks(),this.userService.getUserById(this.user._id).subscribe({next:e=>{this.user=e}})}getAllNotebooks(){this.notebookService.getNotebook().subscribe({next:e=>{this.allNotebooks=e,this.applyFilters()},error:e=>{console.log(e)}})}applyFilters(){this.notebooks=this.allNotebooks.filter(e=>{let i=this.showPrivate&&e.visibility==="private"||this.showPublic&&e.visibility==="public",n=e.title.toLowerCase().includes(this.filterText.toLowerCase());return i&&n})}getAllUsers(){this.userService.getUsers().subscribe({next:e=>{this.users=e},error:e=>{console.log(e)}})}onNotebookDeleted(e){this.notebooks=this.notebooks.filter(i=>i._id!==e)}onUserDeleted(e){this.users=this.users.filter(i=>i._id!==e)}openModalNewNotebook(){this.dialog.open(K,{autoFocus:!1}).afterClosed().subscribe(i=>{i&&this.getAllNotebooks()})}openModalNewUser(){this.dialog.open(z,{autoFocus:!1}).afterClosed().subscribe(i=>{i&&this.getAllUsers()})}logout(){this.userService.logout(),this.router.navigate(["/login"])}toggleContent(e){e===!1?this.getAllUsers():this.getAllNotebooks(),this.showNotebooks=e}static \u0275fac=function(i){return new(i||t)(C(R),C(J),C(O),C(G),C(Z))};static \u0275cmp=N({type:t,selectors:[["app-home"]],decls:25,vars:8,consts:[["usersList",""],[1,"container"],[1,"header"],[1,"titre1"],["src","/img/logo.png","alt","Image",1,"resized-image"],[1,"titre"],[1,"titre2"],[1,"container-infoUser"],[1,"texte"],[1,"user"],[1,"container-actions"],["class","action",3,"click",4,"ngIf"],["class","switch",3,"click",4,"ngIf"],[1,"logout",3,"click"],["xmlns","http://www.w3.org/2000/svg","id","Layer_1","data-name","Layer 1","viewBox","0 0 24 24"],["d","M11.5,16A1.5,1.5,0,0,0,10,17.5v.8A2.7,2.7,0,0,1,7.3,21H5.7A2.7,2.7,0,0,1,3,18.3V5.7A2.7,2.7,0,0,1,5.7,3H7.3A2.7,2.7,0,0,1,10,5.7v.8a1.5,1.5,0,0,0,3,0V5.7A5.706,5.706,0,0,0,7.3,0H5.7A5.706,5.706,0,0,0,0,5.7V18.3A5.706,5.706,0,0,0,5.7,24H7.3A5.706,5.706,0,0,0,13,18.3v-.8A1.5,1.5,0,0,0,11.5,16Z"],["d","M22.561,9.525,17.975,4.939a1.5,1.5,0,0,0-2.121,2.122l3.411,3.411L7,10.5a1.5,1.5,0,0,0,0,3H7l12.318-.028-3.467,3.467a1.5,1.5,0,0,0,2.121,2.122l4.586-4.586A3.505,3.505,0,0,0,22.561,9.525Z"],["class","container-filtres",4,"ngIf"],["class","content",4,"ngIf"],["class","content-vide",4,"ngIf"],[1,"action",3,"click"],["xmlns","http://www.w3.org/2000/svg","id","Outline","viewBox","0 0 24 24"],["d","M23,11H21V9a1,1,0,0,0-2,0v2H17a1,1,0,0,0,0,2h2v2a1,1,0,0,0,2,0V13h2a1,1,0,0,0,0-2Z"],["d","M9,12A6,6,0,1,0,3,6,6.006,6.006,0,0,0,9,12ZM9,2A4,4,0,1,1,5,6,4,4,0,0,1,9,2Z"],["d","M9,14a9.01,9.01,0,0,0-9,9,1,1,0,0,0,2,0,7,7,0,0,1,14,0,1,1,0,0,0,2,0A9.01,9.01,0,0,0,9,14Z"],["d","M.485,8.088l9.862,5.917c.51,.306,1.081,.459,1.653,.459,.571,0,1.143-.153,1.653-.459l9.861-5.917c.301-.181,.485-.506,.485-.857s-.184-.677-.485-.857L13.654,.456c-1.021-.613-2.287-.613-3.307,0L.485,6.373c-.301,.181-.485,.506-.485,.857s.184,.677,.485,.857ZM11.376,2.171h0c.384-.23,.863-.23,1.248,0l8.432,5.06-8.432,5.06c-.385,.23-.864,.23-1.249,0L2.944,7.23,11.376,2.171Zm12.624,17.829c0,.553-.448,1-1,1h-2v2c0,.553-.448,1-1,1s-1-.447-1-1v-2h-2c-.552,0-1-.447-1-1s.448-1,1-1h2v-2c0-.553,.448-1,1-1s1,.447,1,1v2h2c.552,0,1,.447,1,1Zm-11.143,3.286c-.188,.312-.519,.485-.858,.485-.175,0-.353-.046-.514-.143L.485,17.029c-.474-.284-.627-.898-.343-1.372,.283-.474,.897-.628,1.372-.343l11,6.6c.474,.284,.627,.898,.343,1.372Zm11-12.196c.284,.474,.131,1.088-.343,1.372l-11,6.6c-.159,.095-.336,.143-.515,.143s-.356-.048-.515-.143L.485,12.462c-.474-.284-.627-.898-.343-1.372,.283-.475,.897-.628,1.372-.343l10.485,6.291,10.485-6.291c.474-.284,1.088-.131,1.372,.343Z"],[1,"switch",3,"click"],["d","M12,16a4,4,0,1,1,4-4A4,4,0,0,1,12,16Zm0-6a2,2,0,1,0,2,2A2,2,0,0,0,12,10Zm6,13A6,6,0,0,0,6,23a1,1,0,0,0,2,0,4,4,0,0,1,8,0,1,1,0,0,0,2,0ZM18,8a4,4,0,1,1,4-4A4,4,0,0,1,18,8Zm0-6a2,2,0,1,0,2,2A2,2,0,0,0,18,2Zm6,13a6.006,6.006,0,0,0-6-6,1,1,0,0,0,0,2,4,4,0,0,1,4,4,1,1,0,0,0,2,0ZM6,8a4,4,0,1,1,4-4A4,4,0,0,1,6,8ZM6,2A2,2,0,1,0,8,4,2,2,0,0,0,6,2ZM2,15a4,4,0,0,1,4-4A1,1,0,0,0,6,9a6.006,6.006,0,0,0-6,6,1,1,0,0,0,2,0Z"],["d","M22.485,10.975,12,17.267,1.515,10.975A1,1,0,1,0,.486,12.69l11,6.6a1,1,0,0,0,1.03,0l11-6.6a1,1,0,1,0-1.029-1.715Z"],["d","M22.485,15.543,12,21.834,1.515,15.543A1,1,0,1,0,.486,17.258l11,6.6a1,1,0,0,0,1.03,0l11-6.6a1,1,0,1,0-1.029-1.715Z"],["d","M12,14.773a2.976,2.976,0,0,1-1.531-.425L.485,8.357a1,1,0,0,1,0-1.714L10.469.652a2.973,2.973,0,0,1,3.062,0l9.984,5.991a1,1,0,0,1,0,1.714l-9.984,5.991A2.976,2.976,0,0,1,12,14.773ZM2.944,7.5,11.5,12.633a.974.974,0,0,0,1,0L21.056,7.5,12.5,2.367a.974.974,0,0,0-1,0h0Z"],[1,"container-filtres"],["placeholder","Rechercher...",1,"input-filtres",3,"ngModelChange","input","ngModel"],[1,"checkbox"],[1,"checkbox-container"],["checked","","type","checkbox",1,"custom-checkbox",3,"ngModelChange","change","ngModel"],[1,"checkmark"],[1,"content"],[4,"ngIf","ngIfElse"],[3,"notebook","notebookDeleted",4,"ngFor","ngForOf"],[3,"notebookDeleted","notebook"],[3,"user","userDeleted",4,"ngFor","ngForOf"],[3,"userDeleted","user"],[1,"content-vide"]],template:function(i,n){i&1&&(o(0,"div",1)(1,"div",2)(2,"div",3),g(3,"img",4),o(4,"div",5),p(5,"STEP Aigle"),r()(),o(6,"div",6),p(7,"Carnet de bord"),r(),o(8,"div",7)(9,"div",8),p(10,"Bienvenu"),r(),o(11,"div",9),p(12),r()(),o(13,"div",10),x(14,ne,6,0,"button",11)(15,ie,4,0,"button",11)(16,oe,4,0,"button",12)(17,re,6,0,"button",12),o(18,"button",13),u("click",function(){return n.logout()}),h(),o(19,"svg",14),g(20,"path",15)(21,"path",16),r()()()(),x(22,se,14,3,"div",17)(23,pe,4,2,"div",18)(24,ge,4,2,"div",19),r()),i&2&&(a(12),A(n.user.name),a(2),m("ngIf",!n.showNotebooks),a(),m("ngIf",n.showNotebooks&&n.notebooks.length!=0),a(),m("ngIf",n.showNotebooks&&n.user.role!="user"),a(),m("ngIf",!n.showNotebooks),a(5),m("ngIf",n.showNotebooks),a(),m("ngIf",n.notebooks.length!=0),a(),m("ngIf",n.notebooks.length===0))},dependencies:[T,I,D,L,F,U,Q,B],styles:[".titre1[_ngcontent-%COMP%]{padding-top:10px;display:flex;flex-direction:row;gap:10px;justify-content:center;align-items:center}.titre2[_ngcontent-%COMP%]{font-size:20px;font-weight:600;text-transform:uppercase}.container-infoUser[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:5px;justify-content:center;align-items:center}.container-infoUser[_ngcontent-%COMP%]   .texte[_ngcontent-%COMP%]{font-size:18px}.user[_ngcontent-%COMP%]{font-size:18px;font-weight:600}.content[_ngcontent-%COMP%]{padding:10px;width:95%;display:flex;flex-direction:column;gap:10px;justify-content:center;align-items:center;overflow-y:auto}.content-vide[_ngcontent-%COMP%]{width:95%;display:flex;flex-direction:column;gap:10px;justify-content:flex-start;align-items:center;overflow-y:auto;padding:10px 5px;height:100%}.ng-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;gap:10px;justify-content:center;align-items:center}.container-filtres[_ngcontent-%COMP%]{display:flex;flex-direction:row;gap:10px;justify-content:center;align-items:center;background-color:#f0f8ff;width:100%;padding:10px 0}app-notebook-item[_ngcontent-%COMP%]{width:100%}app-user-item[_ngcontent-%COMP%]{width:100%}.checkbox[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;gap:5px}.logout[_ngcontent-%COMP%]{background-color:#960303;color:#fff;width:auto}.logout[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:14px;fill:#fff}"]})}return t})();var fe=[{path:"",component:$}],ee=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=w({type:t});static \u0275inj=v({imports:[E.forChild(fe),E]})}return t})();var Fe=(()=>{class t{static \u0275fac=function(i){return new(i||t)};static \u0275mod=w({type:t});static \u0275inj=v({imports:[P,j,W,ee,X,q]})}return t})();export{Fe as a};
